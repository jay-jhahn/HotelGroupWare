{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar defaultOptions_1 = __importDefault(require(\"../defaultOptions\"));\n\nvar enums_1 = require(\"../enums\");\n\nvar SortUtils_1 = require(\"./SortUtils\");\n\nexports.getUpdatedSortedColumns = function (columns, columnKey, sortingMode) {\n  var newColumns = columns.map(function (c) {\n    return __assign({}, c);\n  });\n  var curentColumn = newColumns.find(function (c) {\n    return c.key === columnKey;\n  });\n\n  if (curentColumn) {\n    var nextSortDirection = exports.getNextSortDirection(curentColumn.sortDirection);\n\n    if (SortUtils_1.isTripleStateSorting(sortingMode) && curentColumn.sortDirection && nextSortDirection === defaultOptions_1.default.columnSortDirection) {\n      nextSortDirection = undefined;\n    }\n\n    if (!SortUtils_1.isMultipleSorting(sortingMode)) {\n      newColumns.forEach(function (c) {\n        delete c.sortDirection;\n        delete c.sortIndex;\n      });\n    }\n\n    if (nextSortDirection) {\n      curentColumn.sortDirection = nextSortDirection;\n\n      if (SortUtils_1.isMultipleSorting(sortingMode) && !curentColumn.sortIndex) {\n        var sortedColumns = newColumns.filter(function (c) {\n          return c.sortDirection;\n        });\n        curentColumn.sortIndex = sortedColumns.length + 1;\n      }\n    } else {\n      delete curentColumn.sortDirection;\n      delete curentColumn.sortIndex;\n    }\n\n    if (SortUtils_1.isMultipleSorting(sortingMode)) {\n      var sortedColumns = SortUtils_1.sortColumns(newColumns);\n      sortedColumns.forEach(function (c, i) {\n        c.sortIndex = i + 1;\n      });\n    }\n  }\n\n  return newColumns;\n};\n\nexports.getNextSortDirection = function (previousSortdirection) {\n  var nextSortDirection;\n\n  if (previousSortdirection) {\n    nextSortDirection = previousSortdirection === enums_1.SortDirection.Ascend ? enums_1.SortDirection.Descend : enums_1.SortDirection.Ascend;\n  } else {\n    nextSortDirection = defaultOptions_1.default.columnSortDirection;\n  }\n\n  return nextSortDirection;\n};","map":{"version":3,"sources":["C:/Dev76/workspace_react/board/node_modules/ka-table/Utils/HeadRowUtils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","defineProperty","exports","value","defaultOptions_1","require","enums_1","SortUtils_1","getUpdatedSortedColumns","columns","columnKey","sortingMode","newColumns","map","c","curentColumn","find","key","nextSortDirection","getNextSortDirection","sortDirection","isTripleStateSorting","default","columnSortDirection","undefined","isMultipleSorting","forEach","sortIndex","sortedColumns","filter","sortColumns","previousSortdirection","SortDirection","Ascend","Descend"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar defaultOptions_1 = __importDefault(require(\"../defaultOptions\"));\r\nvar enums_1 = require(\"../enums\");\r\nvar SortUtils_1 = require(\"./SortUtils\");\r\nexports.getUpdatedSortedColumns = function (columns, columnKey, sortingMode) {\r\n    var newColumns = columns.map(function (c) { return (__assign({}, c)); });\r\n    var curentColumn = newColumns.find(function (c) { return c.key === columnKey; });\r\n    if (curentColumn) {\r\n        var nextSortDirection = exports.getNextSortDirection(curentColumn.sortDirection);\r\n        if (SortUtils_1.isTripleStateSorting(sortingMode)\r\n            && curentColumn.sortDirection\r\n            && nextSortDirection === defaultOptions_1.default.columnSortDirection) {\r\n            nextSortDirection = undefined;\r\n        }\r\n        if (!SortUtils_1.isMultipleSorting(sortingMode)) {\r\n            newColumns.forEach(function (c) {\r\n                delete c.sortDirection;\r\n                delete c.sortIndex;\r\n            });\r\n        }\r\n        if (nextSortDirection) {\r\n            curentColumn.sortDirection = nextSortDirection;\r\n            if (SortUtils_1.isMultipleSorting(sortingMode) && !curentColumn.sortIndex) {\r\n                var sortedColumns = newColumns.filter(function (c) { return c.sortDirection; });\r\n                curentColumn.sortIndex = sortedColumns.length + 1;\r\n            }\r\n        }\r\n        else {\r\n            delete curentColumn.sortDirection;\r\n            delete curentColumn.sortIndex;\r\n        }\r\n        if (SortUtils_1.isMultipleSorting(sortingMode)) {\r\n            var sortedColumns = SortUtils_1.sortColumns(newColumns);\r\n            sortedColumns.forEach(function (c, i) {\r\n                c.sortIndex = i + 1;\r\n            });\r\n        }\r\n    }\r\n    return newColumns;\r\n};\r\nexports.getNextSortDirection = function (previousSortdirection) {\r\n    var nextSortDirection;\r\n    if (previousSortdirection) {\r\n        nextSortDirection = previousSortdirection === enums_1.SortDirection.Ascend\r\n            ? enums_1.SortDirection.Descend : enums_1.SortDirection.Ascend;\r\n    }\r\n    else {\r\n        nextSortDirection = defaultOptions_1.default.columnSortDirection;\r\n    }\r\n    return nextSortDirection;\r\n};\r\n"]},"metadata":{},"sourceType":"script"}