{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar enums_1 = require(\"../enums\");\n\nvar DataUtils_1 = require(\"./DataUtils\");\n\nvar FilterUtils_1 = require(\"./FilterUtils\");\n\nvar GroupUtils_1 = require(\"./GroupUtils\");\n\nvar PagingUtils_1 = require(\"./PagingUtils\");\n\nvar SortUtils_1 = require(\"./SortUtils\");\n\nfunction extendProps(childElementAttributes, childProps, childComponent) {\n  var resultProps = childElementAttributes;\n  var childCustomAttributes = childComponent && childComponent.elementAttributes && childComponent.elementAttributes(childProps);\n\n  if (childCustomAttributes) {\n    var dispatch = childProps.dispatch;\n    resultProps = mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch);\n  }\n\n  return resultProps;\n}\n\nexports.extendProps = extendProps;\n;\n\nvar emptyFunc = function () {};\n\nfunction mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch) {\n  var customPropsWithEvents = {};\n\n  var _loop_1 = function (prop) {\n    if (childCustomAttributes.hasOwnProperty(prop)) {\n      var propName = prop;\n      var propValue_1 = childCustomAttributes[propName];\n      var baseFunc_1 = childElementAttributes[propName] || emptyFunc;\n\n      if (typeof propValue_1 === 'function') {\n        customPropsWithEvents[prop] = function (e) {\n          propValue_1(e, {\n            baseFunc: baseFunc_1,\n            childElementAttributes: childElementAttributes,\n            childProps: childProps,\n            dispatch: dispatch\n          });\n        };\n      }\n    }\n  };\n\n  for (var prop in childCustomAttributes) {\n    _loop_1(prop);\n  }\n\n  var mergedResult = __assign(__assign(__assign(__assign({}, childElementAttributes), childCustomAttributes), customPropsWithEvents), {\n    className: (childElementAttributes.className || '') + \" \" + (childCustomAttributes.className || ''),\n    style: __assign(__assign({}, childElementAttributes.style), childCustomAttributes.style)\n  });\n\n  return mergedResult;\n}\n\nexports.mergeProps = mergeProps;\n;\n\nexports.areAllFilteredRowsSelected = function (props) {\n  var _a = props.selectedRows,\n      selectedRows = _a === void 0 ? [] : _a,\n      rowKeyField = props.rowKeyField;\n  return FilterUtils_1.filterAndSearchData(props).every(function (d) {\n    return selectedRows.includes(DataUtils_1.getValueByField(d, rowKeyField));\n  });\n};\n\nexports.areAllVisibleRowsSelected = function (props) {\n  var _a = props.selectedRows,\n      selectedRows = _a === void 0 ? [] : _a,\n      rowKeyField = props.rowKeyField;\n  return exports.getData(props).every(function (d) {\n    return selectedRows.includes(DataUtils_1.getValueByField(d, rowKeyField));\n  });\n};\n\nexports.getData = function (props) {\n  var columns = props.columns,\n      groups = props.groups,\n      groupsExpanded = props.groupsExpanded,\n      paging = props.paging,\n      sort = props.sort,\n      _a = props.sortingMode,\n      sortingMode = _a === void 0 ? enums_1.SortingMode.None : _a;\n  var _b = props.data,\n      data = _b === void 0 ? [] : _b;\n  data = __spreadArrays(data);\n  data = FilterUtils_1.filterAndSearchData(props);\n\n  if (!SortUtils_1.isRemoteSorting(sortingMode)) {\n    data = SortUtils_1.sortData(columns, data, sort);\n  }\n\n  var groupedColumns = groups ? columns.filter(function (c) {\n    return groups.some(function (g) {\n      return g.columnKey === c.key;\n    });\n  }) : [];\n  var groupedData = groups ? GroupUtils_1.getGroupedData(data, groups, groupedColumns, groupsExpanded) : data;\n  data = PagingUtils_1.getPageData(groupedData, paging);\n  return data;\n};\n\nexports.getSelectedData = function (_a) {\n  var data = _a.data,\n      selectedRows = _a.selectedRows,\n      rowKeyField = _a.rowKeyField;\n  return data ? data.filter(function (d) {\n    var _a;\n\n    var value = DataUtils_1.getValueByField(d, rowKeyField);\n    return (_a = selectedRows) === null || _a === void 0 ? void 0 : _a.some(function (v) {\n      return v === value;\n    });\n  }) : [];\n};\n\nexports.getSortedColumns = function (props) {\n  return SortUtils_1.sortColumns(props.columns);\n};\n\nexports.getPagesCountByProps = function (props) {\n  var paging = props.paging;\n  var pagesCount = 1;\n\n  if (paging && paging.enabled) {\n    pagesCount = PagingUtils_1.getPagesCount(FilterUtils_1.filterAndSearchData(props), paging);\n  }\n\n  return pagesCount;\n};\n\nexports.prepareTableOptions = function (props) {\n  var groups = props.groups;\n  var columns = props.columns;\n  var groupedData = exports.getData(props);\n  var groupColumnsCount = 0;\n  var groupedColumns = [];\n\n  if (groups) {\n    groupColumnsCount = groups.length;\n    groupedColumns = columns.filter(function (c) {\n      return groups.some(function (g) {\n        return g.columnKey === c.key;\n      });\n    });\n    columns = columns.filter(function (c) {\n      return !groups.some(function (g) {\n        return g.columnKey === c.key;\n      });\n    });\n  }\n\n  columns = columns.filter(function (c) {\n    return c.visible !== false;\n  });\n  return {\n    columns: columns,\n    groupColumnsCount: groupColumnsCount,\n    groupedColumns: groupedColumns,\n    groupedData: groupedData\n  };\n};\n\nexports.getDraggableProps = function (key, dispatch, actionCreator, draggedClass, dragOverClass) {\n  var count = 0;\n  return {\n    draggable: true,\n    onDragStart: function (event) {\n      count = 0;\n      event.dataTransfer.setData('ka-draggableKeyValue', JSON.stringify(key));\n      event.currentTarget.classList.add(draggedClass);\n      event.dataTransfer.effectAllowed = 'move';\n    },\n    onDragEnd: function (event) {\n      event.currentTarget.classList.remove(draggedClass);\n    },\n    onDrop: function (event) {\n      event.currentTarget.classList.remove(dragOverClass);\n      var draggableKeyValue = JSON.parse(event.dataTransfer.getData('ka-draggableKeyValue'));\n      dispatch(actionCreator(draggableKeyValue, key));\n    },\n    onDragEnter: function (event) {\n      count++;\n\n      if (!event.currentTarget.classList.contains(dragOverClass)) {\n        event.currentTarget.classList.add(dragOverClass);\n      }\n\n      event.preventDefault();\n    },\n    onDragLeave: function (event) {\n      count--;\n\n      if (count === 0) {\n        event.currentTarget.classList.remove(dragOverClass);\n      }\n    },\n    onDragOver: function (event) {\n      if (!event.currentTarget.classList.contains(dragOverClass)) {\n        event.currentTarget.classList.add(dragOverClass);\n      }\n\n      event.preventDefault();\n    }\n  };\n};","map":{"version":3,"sources":["D:/Dev76/hms_react/board/node_modules/ka-table/Utils/PropsUtils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArrays","il","r","Array","k","a","j","jl","defineProperty","exports","value","enums_1","require","DataUtils_1","FilterUtils_1","GroupUtils_1","PagingUtils_1","SortUtils_1","extendProps","childElementAttributes","childProps","childComponent","resultProps","childCustomAttributes","elementAttributes","dispatch","mergeProps","emptyFunc","customPropsWithEvents","_loop_1","prop","propName","propValue_1","baseFunc_1","e","baseFunc","mergedResult","className","style","areAllFilteredRowsSelected","props","_a","selectedRows","rowKeyField","filterAndSearchData","every","d","includes","getValueByField","areAllVisibleRowsSelected","getData","columns","groups","groupsExpanded","paging","sort","sortingMode","SortingMode","None","_b","data","isRemoteSorting","sortData","groupedColumns","filter","c","some","g","columnKey","key","groupedData","getGroupedData","getPageData","getSelectedData","v","getSortedColumns","sortColumns","getPagesCountByProps","pagesCount","enabled","getPagesCount","prepareTableOptions","groupColumnsCount","visible","getDraggableProps","actionCreator","draggedClass","dragOverClass","count","draggable","onDragStart","event","dataTransfer","setData","JSON","stringify","currentTarget","classList","add","effectAllowed","onDragEnd","remove","onDrop","draggableKeyValue","parse","onDragEnter","contains","preventDefault","onDragLeave","onDragOver"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar enums_1 = require(\"../enums\");\r\nvar DataUtils_1 = require(\"./DataUtils\");\r\nvar FilterUtils_1 = require(\"./FilterUtils\");\r\nvar GroupUtils_1 = require(\"./GroupUtils\");\r\nvar PagingUtils_1 = require(\"./PagingUtils\");\r\nvar SortUtils_1 = require(\"./SortUtils\");\r\nfunction extendProps(childElementAttributes, childProps, childComponent) {\r\n    var resultProps = childElementAttributes;\r\n    var childCustomAttributes = childComponent && childComponent.elementAttributes && childComponent.elementAttributes(childProps);\r\n    if (childCustomAttributes) {\r\n        var dispatch = childProps.dispatch;\r\n        resultProps = mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch);\r\n    }\r\n    return resultProps;\r\n}\r\nexports.extendProps = extendProps;\r\n;\r\nvar emptyFunc = function () { };\r\nfunction mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch) {\r\n    var customPropsWithEvents = {};\r\n    var _loop_1 = function (prop) {\r\n        if (childCustomAttributes.hasOwnProperty(prop)) {\r\n            var propName = prop;\r\n            var propValue_1 = childCustomAttributes[propName];\r\n            var baseFunc_1 = childElementAttributes[propName] || emptyFunc;\r\n            if (typeof propValue_1 === 'function') {\r\n                customPropsWithEvents[prop] = function (e) {\r\n                    propValue_1(e, {\r\n                        baseFunc: baseFunc_1,\r\n                        childElementAttributes: childElementAttributes,\r\n                        childProps: childProps,\r\n                        dispatch: dispatch,\r\n                    });\r\n                };\r\n            }\r\n        }\r\n    };\r\n    for (var prop in childCustomAttributes) {\r\n        _loop_1(prop);\r\n    }\r\n    var mergedResult = __assign(__assign(__assign(__assign({}, childElementAttributes), childCustomAttributes), customPropsWithEvents), { className: (childElementAttributes.className || '') + \" \" + (childCustomAttributes.className || ''), style: __assign(__assign({}, childElementAttributes.style), childCustomAttributes.style) });\r\n    return mergedResult;\r\n}\r\nexports.mergeProps = mergeProps;\r\n;\r\nexports.areAllFilteredRowsSelected = function (props) {\r\n    var _a = props.selectedRows, selectedRows = _a === void 0 ? [] : _a, rowKeyField = props.rowKeyField;\r\n    return FilterUtils_1.filterAndSearchData(props).every(function (d) { return selectedRows.includes(DataUtils_1.getValueByField(d, rowKeyField)); });\r\n};\r\nexports.areAllVisibleRowsSelected = function (props) {\r\n    var _a = props.selectedRows, selectedRows = _a === void 0 ? [] : _a, rowKeyField = props.rowKeyField;\r\n    return exports.getData(props).every(function (d) { return selectedRows.includes(DataUtils_1.getValueByField(d, rowKeyField)); });\r\n};\r\nexports.getData = function (props) {\r\n    var columns = props.columns, groups = props.groups, groupsExpanded = props.groupsExpanded, paging = props.paging, sort = props.sort, _a = props.sortingMode, sortingMode = _a === void 0 ? enums_1.SortingMode.None : _a;\r\n    var _b = props.data, data = _b === void 0 ? [] : _b;\r\n    data = __spreadArrays(data);\r\n    data = FilterUtils_1.filterAndSearchData(props);\r\n    if (!SortUtils_1.isRemoteSorting(sortingMode)) {\r\n        data = SortUtils_1.sortData(columns, data, sort);\r\n    }\r\n    var groupedColumns = groups ? columns.filter(function (c) { return groups.some(function (g) { return g.columnKey === c.key; }); }) : [];\r\n    var groupedData = groups ? GroupUtils_1.getGroupedData(data, groups, groupedColumns, groupsExpanded) : data;\r\n    data = PagingUtils_1.getPageData(groupedData, paging);\r\n    return data;\r\n};\r\nexports.getSelectedData = function (_a) {\r\n    var data = _a.data, selectedRows = _a.selectedRows, rowKeyField = _a.rowKeyField;\r\n    return data ? data.filter(function (d) {\r\n        var _a;\r\n        var value = DataUtils_1.getValueByField(d, rowKeyField);\r\n        return (_a = selectedRows) === null || _a === void 0 ? void 0 : _a.some(function (v) { return v === value; });\r\n    }) : [];\r\n};\r\nexports.getSortedColumns = function (props) {\r\n    return SortUtils_1.sortColumns(props.columns);\r\n};\r\nexports.getPagesCountByProps = function (props) {\r\n    var paging = props.paging;\r\n    var pagesCount = 1;\r\n    if (paging && paging.enabled) {\r\n        pagesCount = PagingUtils_1.getPagesCount(FilterUtils_1.filterAndSearchData(props), paging);\r\n    }\r\n    return pagesCount;\r\n};\r\nexports.prepareTableOptions = function (props) {\r\n    var groups = props.groups;\r\n    var columns = props.columns;\r\n    var groupedData = exports.getData(props);\r\n    var groupColumnsCount = 0;\r\n    var groupedColumns = [];\r\n    if (groups) {\r\n        groupColumnsCount = groups.length;\r\n        groupedColumns = columns.filter(function (c) { return groups.some(function (g) { return g.columnKey === c.key; }); });\r\n        columns = columns.filter(function (c) { return !groups.some(function (g) { return g.columnKey === c.key; }); });\r\n    }\r\n    columns = columns.filter(function (c) { return c.visible !== false; });\r\n    return {\r\n        columns: columns,\r\n        groupColumnsCount: groupColumnsCount,\r\n        groupedColumns: groupedColumns,\r\n        groupedData: groupedData\r\n    };\r\n};\r\nexports.getDraggableProps = function (key, dispatch, actionCreator, draggedClass, dragOverClass) {\r\n    var count = 0;\r\n    return {\r\n        draggable: true,\r\n        onDragStart: function (event) {\r\n            count = 0;\r\n            event.dataTransfer.setData('ka-draggableKeyValue', JSON.stringify(key));\r\n            event.currentTarget.classList.add(draggedClass);\r\n            event.dataTransfer.effectAllowed = 'move';\r\n        },\r\n        onDragEnd: function (event) {\r\n            event.currentTarget.classList.remove(draggedClass);\r\n        },\r\n        onDrop: function (event) {\r\n            event.currentTarget.classList.remove(dragOverClass);\r\n            var draggableKeyValue = JSON.parse(event.dataTransfer.getData('ka-draggableKeyValue'));\r\n            dispatch(actionCreator(draggableKeyValue, key));\r\n        },\r\n        onDragEnter: function (event) {\r\n            count++;\r\n            if (!event.currentTarget.classList.contains(dragOverClass)) {\r\n                event.currentTarget.classList.add(dragOverClass);\r\n            }\r\n            event.preventDefault();\r\n        },\r\n        onDragLeave: function (event) {\r\n            count--;\r\n            if (count === 0) {\r\n                event.currentTarget.classList.remove(dragOverClass);\r\n            }\r\n        },\r\n        onDragOver: function (event) {\r\n            if (!event.currentTarget.classList.contains(dragOverClass)) {\r\n                event.currentTarget.classList.add(dragOverClass);\r\n            }\r\n            event.preventDefault();\r\n        }\r\n    };\r\n};\r\n"]},"metadata":{},"sourceType":"script"}