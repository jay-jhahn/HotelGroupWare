{"ast":null,"code":"\"use strict\";\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar defaultOptions_1 = __importDefault(require(\"../defaultOptions\"));\n\nvar enums_1 = require(\"../enums\");\n\nvar CommonUtils_1 = require(\"./CommonUtils\");\n\nvar DataUtils_1 = require(\"./DataUtils\");\n\nvar TypeUtils_1 = require(\"./TypeUtils\");\n\nexports.getRowEditableCells = function (rowKeyValue, editableCells) {\n  return editableCells.filter(function (c) {\n    return c.rowKeyValue === rowKeyValue;\n  });\n};\n\nexports.searchData = function (columns, data, searchText, search) {\n  var searched = columns.reduce(function (initialData, c) {\n    var filterFunction = function (item) {\n      if (initialData.indexOf(item) >= 0) {\n        return false;\n      }\n\n      var searchContent = search && search({\n        column: c,\n        searchText: searchText,\n        rowData: item\n      });\n\n      if (searchContent != null) {\n        return searchContent;\n      }\n\n      var columnValue = DataUtils_1.getValueByColumn(item, c);\n\n      if (columnValue == null) {\n        return false;\n      }\n\n      return columnValue.toString().toLowerCase().includes(searchText.toLowerCase());\n    };\n\n    return initialData.concat(data.filter(filterFunction));\n  }, []);\n  return data.filter(function (d) {\n    return searched.indexOf(d) >= 0;\n  });\n};\n\nexports.filterAndSearchData = function (props) {\n  var extendedFilter = props.extendedFilter,\n      searchText = props.searchText,\n      columns = props.columns,\n      search = props.search,\n      filter = props.filter;\n  var _a = props.data,\n      data = _a === void 0 ? [] : _a;\n  data = __spreadArrays(data);\n  data = extendedFilter ? extendedFilter(data) : data;\n  data = searchText ? exports.searchData(columns, data, searchText, search) : data;\n  data = TypeUtils_1.convertToColumnTypes(data, columns);\n  data = exports.filterData(data, columns, filter);\n  return data;\n};\n\nvar getCompare = function (column) {\n  var filterRowOperator = column.filterRowOperator || exports.getDefaultOperatorForType(column.dataType || defaultOptions_1.default.columnDataType);\n  var filterOperator = exports.predefinedFilterOperators.find(function (fo) {\n    return filterRowOperator === fo.name;\n  });\n\n  if (!filterOperator) {\n    throw new Error(\"'\" + column.filterRowOperator + \"' has not found in predefinedFilterOperators array, available operators: \" + exports.predefinedFilterOperators.map(function (o) {\n      return o.name;\n    }).join(', '));\n  }\n\n  return filterOperator.compare;\n};\n\nexports.filterData = function (data, columns, filter) {\n  return columns.reduce(function (initialData, column) {\n    var _a;\n\n    if (CommonUtils_1.isEmpty(column.filterRowValue) && column.filterRowOperator !== enums_1.FilterOperatorName.IsEmpty && column.filterRowOperator !== enums_1.FilterOperatorName.IsNotEmpty) {\n      return initialData;\n    }\n\n    var compare = ((_a = filter) === null || _a === void 0 ? void 0 : _a({\n      column: column\n    })) || getCompare(column);\n    return initialData.filter(function (d) {\n      var fieldValue = DataUtils_1.getValueByColumn(d, column);\n      var conditionValue = column.filterRowValue;\n\n      if (column.dataType === enums_1.DataType.Date) {\n        fieldValue = fieldValue == null ? fieldValue : new Date(fieldValue).setHours(0, 0, 0, 0);\n        conditionValue = conditionValue == null ? conditionValue : new Date(conditionValue).setHours(0, 0, 0, 0);\n      }\n\n      return compare(fieldValue, conditionValue);\n    });\n  }, data);\n};\n\nexports.getDefaultOperatorForType = function (type) {\n  var filterOperator = exports.predefinedFilterOperators.find(function (o) {\n    return o.defaultForTypes && o.defaultForTypes.includes(type);\n  });\n  return filterOperator && filterOperator.name || '=';\n};\n\nexports.predefinedFilterOperators = [{\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue === conditionValue;\n  },\n  defaultForTypes: [enums_1.DataType.Boolean, enums_1.DataType.Number, enums_1.DataType.Date],\n  name: enums_1.FilterOperatorName.Equal\n}, {\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue > conditionValue;\n  },\n  name: enums_1.FilterOperatorName.MoreThan\n}, {\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue < conditionValue;\n  },\n  name: enums_1.FilterOperatorName.LessThan\n}, {\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue >= conditionValue;\n  },\n  name: enums_1.FilterOperatorName.MoreThanOrEqual\n}, {\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue <= conditionValue;\n  },\n  name: enums_1.FilterOperatorName.LessThanOrEqual\n}, {\n  compare: function (fieldValue, conditionValue) {\n    return fieldValue != null && fieldValue.toString().toLowerCase().includes(conditionValue.toString().toLowerCase());\n  },\n  defaultForTypes: [enums_1.DataType.String],\n  name: enums_1.FilterOperatorName.Contains\n}, {\n  compare: function (fieldValue) {\n    return CommonUtils_1.isEmpty(fieldValue);\n  },\n  name: enums_1.FilterOperatorName.IsEmpty\n}, {\n  compare: function (fieldValue) {\n    return !CommonUtils_1.isEmpty(fieldValue);\n  },\n  name: enums_1.FilterOperatorName.IsNotEmpty\n}];","map":{"version":3,"sources":["C:/Dev76/workspace_react/board/node_modules/ka-table/Utils/FilterUtils.js"],"names":["__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","__importDefault","mod","__esModule","Object","defineProperty","exports","value","defaultOptions_1","require","enums_1","CommonUtils_1","DataUtils_1","TypeUtils_1","getRowEditableCells","rowKeyValue","editableCells","filter","c","searchData","columns","data","searchText","search","searched","reduce","initialData","filterFunction","item","indexOf","searchContent","column","rowData","columnValue","getValueByColumn","toString","toLowerCase","includes","concat","d","filterAndSearchData","props","extendedFilter","_a","convertToColumnTypes","filterData","getCompare","filterRowOperator","getDefaultOperatorForType","dataType","default","columnDataType","filterOperator","predefinedFilterOperators","find","fo","name","Error","map","o","join","compare","isEmpty","filterRowValue","FilterOperatorName","IsEmpty","IsNotEmpty","fieldValue","conditionValue","DataType","Date","setHours","type","defaultForTypes","Boolean","Number","Equal","MoreThan","LessThan","MoreThanOrEqual","LessThanOrEqual","String","Contains"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar defaultOptions_1 = __importDefault(require(\"../defaultOptions\"));\r\nvar enums_1 = require(\"../enums\");\r\nvar CommonUtils_1 = require(\"./CommonUtils\");\r\nvar DataUtils_1 = require(\"./DataUtils\");\r\nvar TypeUtils_1 = require(\"./TypeUtils\");\r\nexports.getRowEditableCells = function (rowKeyValue, editableCells) {\r\n    return editableCells.filter(function (c) { return c.rowKeyValue === rowKeyValue; });\r\n};\r\nexports.searchData = function (columns, data, searchText, search) {\r\n    var searched = columns.reduce(function (initialData, c) {\r\n        var filterFunction = function (item) {\r\n            if (initialData.indexOf(item) >= 0) {\r\n                return false;\r\n            }\r\n            var searchContent = search && search({ column: c, searchText: searchText, rowData: item });\r\n            if (searchContent != null) {\r\n                return searchContent;\r\n            }\r\n            var columnValue = DataUtils_1.getValueByColumn(item, c);\r\n            if (columnValue == null) {\r\n                return false;\r\n            }\r\n            return columnValue.toString().toLowerCase().includes(searchText.toLowerCase());\r\n        };\r\n        return initialData.concat(data.filter(filterFunction));\r\n    }, []);\r\n    return data.filter(function (d) { return searched.indexOf(d) >= 0; });\r\n};\r\nexports.filterAndSearchData = function (props) {\r\n    var extendedFilter = props.extendedFilter, searchText = props.searchText, columns = props.columns, search = props.search, filter = props.filter;\r\n    var _a = props.data, data = _a === void 0 ? [] : _a;\r\n    data = __spreadArrays(data);\r\n    data = extendedFilter ? extendedFilter(data) : data;\r\n    data = searchText ? exports.searchData(columns, data, searchText, search) : data;\r\n    data = TypeUtils_1.convertToColumnTypes(data, columns);\r\n    data = exports.filterData(data, columns, filter);\r\n    return data;\r\n};\r\nvar getCompare = function (column) {\r\n    var filterRowOperator = column.filterRowOperator\r\n        || exports.getDefaultOperatorForType(column.dataType || defaultOptions_1.default.columnDataType);\r\n    var filterOperator = exports.predefinedFilterOperators.find(function (fo) { return filterRowOperator === fo.name; });\r\n    if (!filterOperator) {\r\n        throw new Error(\"'\" + column.filterRowOperator + \"' has not found in predefinedFilterOperators array, available operators: \" + exports.predefinedFilterOperators.map(function (o) { return o.name; }).join(', '));\r\n    }\r\n    return filterOperator.compare;\r\n};\r\nexports.filterData = function (data, columns, filter) {\r\n    return columns.reduce(function (initialData, column) {\r\n        var _a;\r\n        if (CommonUtils_1.isEmpty(column.filterRowValue)\r\n            && column.filterRowOperator !== enums_1.FilterOperatorName.IsEmpty\r\n            && column.filterRowOperator !== enums_1.FilterOperatorName.IsNotEmpty) {\r\n            return initialData;\r\n        }\r\n        var compare = ((_a = filter) === null || _a === void 0 ? void 0 : _a({ column: column })) || getCompare(column);\r\n        return initialData.filter(function (d) {\r\n            var fieldValue = DataUtils_1.getValueByColumn(d, column);\r\n            var conditionValue = column.filterRowValue;\r\n            if (column.dataType === enums_1.DataType.Date) {\r\n                fieldValue = fieldValue == null ? fieldValue : new Date(fieldValue).setHours(0, 0, 0, 0);\r\n                conditionValue = conditionValue == null ? conditionValue : new Date(conditionValue).setHours(0, 0, 0, 0);\r\n            }\r\n            return compare(fieldValue, conditionValue);\r\n        });\r\n    }, data);\r\n};\r\nexports.getDefaultOperatorForType = function (type) {\r\n    var filterOperator = exports.predefinedFilterOperators.find(function (o) { return o.defaultForTypes && o.defaultForTypes.includes(type); });\r\n    return (filterOperator && filterOperator.name) || '=';\r\n};\r\nexports.predefinedFilterOperators = [{\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue === conditionValue;\r\n        },\r\n        defaultForTypes: [enums_1.DataType.Boolean, enums_1.DataType.Number, enums_1.DataType.Date],\r\n        name: enums_1.FilterOperatorName.Equal,\r\n    }, {\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue > conditionValue;\r\n        },\r\n        name: enums_1.FilterOperatorName.MoreThan,\r\n    }, {\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue < conditionValue;\r\n        },\r\n        name: enums_1.FilterOperatorName.LessThan,\r\n    }, {\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue >= conditionValue;\r\n        },\r\n        name: enums_1.FilterOperatorName.MoreThanOrEqual,\r\n    }, {\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue <= conditionValue;\r\n        },\r\n        name: enums_1.FilterOperatorName.LessThanOrEqual,\r\n    }, {\r\n        compare: function (fieldValue, conditionValue) {\r\n            return fieldValue != null && fieldValue.toString().toLowerCase().includes(conditionValue.toString().toLowerCase());\r\n        },\r\n        defaultForTypes: [enums_1.DataType.String],\r\n        name: enums_1.FilterOperatorName.Contains,\r\n    }, {\r\n        compare: function (fieldValue) {\r\n            return CommonUtils_1.isEmpty(fieldValue);\r\n        },\r\n        name: enums_1.FilterOperatorName.IsEmpty,\r\n    }, {\r\n        compare: function (fieldValue) {\r\n            return !CommonUtils_1.isEmpty(fieldValue);\r\n        },\r\n        name: enums_1.FilterOperatorName.IsNotEmpty,\r\n    }];\r\n"]},"metadata":{},"sourceType":"script"}